import{loadHeaderFooter as y}from"./util-DIxwDAXf.js";const E={},C=["januray-events","february-events","march-events","april-events","may-events","june-events","july-events","august-events","september-events","october-events","november-events","december-events"];function g(t){if(!t||typeof t!="string")return null;const s=t.split("-").map(e=>e.padStart(2,"0"));if(s.length!==2)return null;const o=parseInt(s[0],10),a=parseInt(s[1],10);return isNaN(o)||isNaN(a)?null:{mm:o,dd:a}}function v(t,s){if(!t)return null;const{mm:o,dd:a}=t,e=String(o).padStart(2,"0"),n=String(a).padStart(2,"0");return`${s}-${e}-${n}`}function b(t,s,o=new Date){if(!(t instanceof Date)||!(s instanceof Date))return"upcoming";const a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),e=new Date(s.getFullYear(),s.getMonth(),s.getDate()),n=new Date(o.getFullYear(),o.getMonth(),o.getDate());return n<a?"upcoming":n>e?"past":"ongoing"}function M(t,s="/public/images/"){const o=document.createElement("article");o.className="event-card";const a=document.createElement("img");a.className="event-card__image",a.loading="lazy";const e=import.meta&&E?"/wdd330-final-project-guatemala-touristic-guide/":"/",n=t.image||"";a.src=n?`${e}images/events/${n}`:`${e}images/placeholder-2x1.svg`,a.alt=t.name||"Event image",a.onerror=()=>{a.onerror=null,a.src=`${e}images/placeholder-2x1.svg`},o.appendChild(a);const c=document.createElement("div");c.className="event-card__body";const l=document.createElement("h3");l.textContent=t.name||"Untitled event",c.appendChild(l);const r=document.createElement("div");r.className="event-card__date",r.textContent=t.displayDate||"",c.appendChild(r);const i=document.createElement("p");i.className="event-card__desc",i.textContent=t.description||"",c.appendChild(i);const u=document.createElement("div");return u.className=`event-card__status event-status--${t.status}`,u.textContent=t.status,c.appendChild(u),o.appendChild(c),o}async function N(){const t=["../json/guatemala-events.json","/json/guatemala-events.json","/public/json/guatemala-events.json","/src/public/json/guatemala-events.json"];let s=null;for(const e of t)try{const n=await fetch(e);try{console.log("events.json fetch",{path:e,ok:n.ok,status:n.status})}catch{}if(!n.ok)continue;s=await n.clone().json();try{console.log("events.json body",s)}catch{}break}catch{}if(!s){console.warn("Events JSON not found at expected paths");return}const o=new Date,a=C.map(e=>document.getElementById(e));s.forEach(e=>{const n=g(e.date&&e.date.start),c=g(e.date&&e.date.end),l=e.date&&e.date.special,r=o.getFullYear();if(!n)return;let i=v(n,r),u=c?v(c,r):i,m=new Date(i),d=new Date(u);d<m&&(d=new Date(d.getFullYear()+1,d.getMonth(),d.getDate()));const f=b(m,d,o),h=l||`${String(n.mm).padStart(2,"0")}-${String(n.dd).padStart(2,"0")}`,_={name:e.name,description:e.description,image:e.image,status:f,displayDate:h},D=m.getMonth(),p=a[D];if(!p)return;const j=M(_);p.appendChild(j)})}document.addEventListener("DOMContentLoaded",()=>{y(),N()});
