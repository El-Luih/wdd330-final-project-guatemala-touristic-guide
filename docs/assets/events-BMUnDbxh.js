import{loadHeaderFooter as y}from"./util-CB9drUZY.js";const E={},C=["januray-events","february-events","march-events","april-events","may-events","june-events","july-events","august-events","september-events","october-events","november-events","december-events"];function p(n){if(!n||typeof n!="string")return null;const a=n.split("-").map(e=>e.padStart(2,"0"));if(a.length!==2)return null;const s=parseInt(a[0],10),o=parseInt(a[1],10);return isNaN(s)||isNaN(o)?null:{mm:s,dd:o}}function g(n,a){if(!n)return null;const{mm:s,dd:o}=n,e=String(s).padStart(2,"0"),t=String(o).padStart(2,"0");return`${a}-${e}-${t}`}function b(n,a,s=new Date){if(!(n instanceof Date)||!(a instanceof Date))return"upcoming";const o=new Date(n.getFullYear(),n.getMonth(),n.getDate()),e=new Date(a.getFullYear(),a.getMonth(),a.getDate()),t=new Date(s.getFullYear(),s.getMonth(),s.getDate());return t<o?"upcoming":t>e?"past":"ongoing"}function M(n){const a=document.createElement("article");a.className="event-card";const s=document.createElement("img");s.className="event-card__image",s.loading="lazy";const o=import.meta&&E?"/wdd330-final-project-guatemala-touristic-guide/":"/",e=n.image||"";s.src=e?`${o}images/events/${e}`:`${o}images/placeholder-2x1.svg`,s.alt=n.name||"Event image",s.onerror=()=>{s.onerror=null,s.src=`${o}images/placeholder-2x1.svg`},a.appendChild(s);const t=document.createElement("div");t.className="event-card__body";const c=document.createElement("h3");c.textContent=n.name||"Untitled event",t.appendChild(c);const r=document.createElement("div");r.className="event-card__date",r.textContent=n.displayDate||"",t.appendChild(r);const i=document.createElement("p");i.className="event-card__desc",i.textContent=n.description||"",t.appendChild(i);const d=document.createElement("div");return d.className=`event-card__status event-status--${n.status}`,d.textContent=n.status,t.appendChild(d),a.appendChild(t),a}async function N(){const n=["../json/guatemala-events.json","/json/guatemala-events.json","/public/json/guatemala-events.json","/src/public/json/guatemala-events.json"];let a=null;for(const e of n)try{const t=await fetch(e);try{console.log("events.json fetch",{path:e,ok:t.ok,status:t.status})}catch{}if(!t.ok)continue;a=await t.clone().json();try{console.log("events.json body",a)}catch{}break}catch{}if(!a){console.warn("Events JSON not found at expected paths");return}const s=new Date,o=C.map(e=>document.getElementById(e));a.forEach(e=>{const t=p(e.date&&e.date.start),c=p(e.date&&e.date.end),r=e.date&&e.date.special,i=s.getFullYear();if(!t)return;let d=g(t,i),v=c?g(c,i):d,u=new Date(d),l=new Date(v);l<u&&(l=new Date(l.getFullYear()+1,l.getMonth(),l.getDate()));const f=b(u,l,s),h=r||`${String(t.mm).padStart(2,"0")}-${String(t.dd).padStart(2,"0")}`,_={name:e.name,description:e.description,image:e.image,status:f,displayDate:h},D=u.getMonth(),m=o[D];if(!m)return;const j=M(_);m.appendChild(j)})}document.addEventListener("DOMContentLoaded",()=>{y(),N()});
