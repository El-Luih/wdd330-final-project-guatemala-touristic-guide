import{loadHeaderFooter as y}from"./util-DDZ2ozR1.js";const j=["januray-events","february-events","march-events","april-events","may-events","june-events","july-events","august-events","september-events","october-events","november-events","december-events"];function p(e){if(!e||typeof e!="string")return null;const s=e.split("-").map(t=>t.padStart(2,"0"));if(s.length!==2)return null;const o=parseInt(s[0],10),a=parseInt(s[1],10);return isNaN(o)||isNaN(a)?null:{mm:o,dd:a}}function g(e,s){if(!e)return null;const{mm:o,dd:a}=e,t=String(o).padStart(2,"0"),n=String(a).padStart(2,"0");return`${s}-${t}-${n}`}function M(e,s,o=new Date){if(!(e instanceof Date)||!(s instanceof Date))return"upcoming";const a=new Date(e.getFullYear(),e.getMonth(),e.getDate()),t=new Date(s.getFullYear(),s.getMonth(),s.getDate()),n=new Date(o.getFullYear(),o.getMonth(),o.getDate());return n<a?"upcoming":n>t?"past":"ongoing"}function N(e,s="/public/images/"){const o=document.createElement("article");o.className="event-card";const a=document.createElement("img");a.className="event-card__image",a.loading="lazy";const t=e.image||"";a.src=s+t,a.alt=e.name||"Event image",a.onerror=()=>{a.onerror=null,a.src="/images/placeholder-2x1.svg"},o.appendChild(a);const n=document.createElement("div");n.className="event-card__body";const l=document.createElement("h3");l.textContent=e.name||"Untitled event",n.appendChild(l);const c=document.createElement("div");c.className="event-card__date",c.textContent=e.displayDate||"",n.appendChild(c);const r=document.createElement("p");r.className="event-card__desc",r.textContent=e.description||"",n.appendChild(r);const d=document.createElement("div");return d.className=`event-card__status event-status--${e.status}`,d.textContent=e.status,n.appendChild(d),o.appendChild(n),o}async function S(){const e=["../json/guatemala-events.json","/json/guatemala-events.json","/public/json/guatemala-events.json","/src/public/json/guatemala-events.json"];let s=null;for(const t of e)try{const n=await fetch(t);if(!n.ok)continue;s=await n.json();break}catch{}if(!s){console.warn("Events JSON not found at expected paths");return}const o=new Date,a=j.map(t=>document.getElementById(t));s.forEach(t=>{const n=p(t.date&&t.date.start),l=p(t.date&&t.date.end),c=t.date&&t.date.special,r=o.getFullYear();if(!n)return;let d=g(n,r),v=l?g(l,r):d,u=new Date(d),i=new Date(v);i<u&&(i=new Date(i.getFullYear()+1,i.getMonth(),i.getDate()));const f=M(u,i,o),h=c||`${String(n.mm).padStart(2,"0")}-${String(n.dd).padStart(2,"0")}`,D={name:t.name,description:t.description,image:t.image,status:f,displayDate:h},E=u.getMonth(),m=a[E];if(!m)return;const C=N(D,"/images/events/");m.appendChild(C)})}document.addEventListener("DOMContentLoaded",()=>{y(),S()});
