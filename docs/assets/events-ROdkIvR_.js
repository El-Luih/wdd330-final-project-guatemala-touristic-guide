import{loadHeaderFooter as j}from"./util-DDZ2ozR1.js";const C={},y=["januray-events","february-events","march-events","april-events","may-events","june-events","july-events","august-events","september-events","october-events","november-events","december-events"];function g(t){if(!t||typeof t!="string")return null;const o=t.split("-").map(e=>e.padStart(2,"0"));if(o.length!==2)return null;const a=parseInt(o[0],10),n=parseInt(o[1],10);return isNaN(a)||isNaN(n)?null:{mm:a,dd:n}}function v(t,o){if(!t)return null;const{mm:a,dd:n}=t,e=String(a).padStart(2,"0"),s=String(n).padStart(2,"0");return`${o}-${e}-${s}`}function b(t,o,a=new Date){if(!(t instanceof Date)||!(o instanceof Date))return"upcoming";const n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),e=new Date(o.getFullYear(),o.getMonth(),o.getDate()),s=new Date(a.getFullYear(),a.getMonth(),a.getDate());return s<n?"upcoming":s>e?"past":"ongoing"}function M(t,o="/public/images/"){const a=document.createElement("article");a.className="event-card";const n=document.createElement("img");n.className="event-card__image",n.loading="lazy";const e=import.meta&&C?"/wdd330-final-project-guatemala-touristic-guide/":"/",s=t.image||"";n.src=s?`${e}images/events/${s}`:`${e}images/placeholder-2x1.svg`,n.alt=t.name||"Event image",n.onerror=()=>{n.onerror=null,n.src=`${e}images/placeholder-2x1.svg`},a.appendChild(n);const c=document.createElement("div");c.className="event-card__body";const l=document.createElement("h3");l.textContent=t.name||"Untitled event",c.appendChild(l);const r=document.createElement("div");r.className="event-card__date",r.textContent=t.displayDate||"",c.appendChild(r);const i=document.createElement("p");i.className="event-card__desc",i.textContent=t.description||"",c.appendChild(i);const u=document.createElement("div");return u.className=`event-card__status event-status--${t.status}`,u.textContent=t.status,c.appendChild(u),a.appendChild(c),a}async function N(){const t=["../json/guatemala-events.json","/json/guatemala-events.json","/public/json/guatemala-events.json","/src/public/json/guatemala-events.json"];let o=null;for(const e of t)try{const s=await fetch(e);if(!s.ok)continue;o=await s.json();break}catch{}if(!o){console.warn("Events JSON not found at expected paths");return}const a=new Date,n=y.map(e=>document.getElementById(e));o.forEach(e=>{const s=g(e.date&&e.date.start),c=g(e.date&&e.date.end),l=e.date&&e.date.special,r=a.getFullYear();if(!s)return;let i=v(s,r),u=c?v(c,r):i,m=new Date(i),d=new Date(u);d<m&&(d=new Date(d.getFullYear()+1,d.getMonth(),d.getDate()));const f=b(m,d,a),h=l||`${String(s.mm).padStart(2,"0")}-${String(s.dd).padStart(2,"0")}`,_={name:e.name,description:e.description,image:e.image,status:f,displayDate:h},D=m.getMonth(),p=n[D];if(!p)return;const E=M(_);p.appendChild(E)})}document.addEventListener("DOMContentLoaded",()=>{j(),N()});
