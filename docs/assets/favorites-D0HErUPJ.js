const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/util-DIxwDAXf.js","assets/util-lN-kmcTN.css","assets/photoRefQueue-DvO8yEEI.js","assets/preload-helper-b3APuFcS.js","assets/RegionState-DqjB2VEy.js"])))=>i.map(i=>d[i]);
import{googleKey as F,loadFavorites as K,loadHeaderFooter as ee,isFavorite as D,toggleFavorite as V}from"./util-DIxwDAXf.js";import{_ as Q}from"./preload-helper-b3APuFcS.js";import{D as te,R as ae,c as ne,b as oe}from"./RegionState-DqjB2VEy.js";const se=function(){let t=!1,a=null;function i(){return`https://maps.googleapis.com/maps/api/js?key=${encodeURIComponent(F)}&libraries=places`}function s(c){return document.querySelector(`script[src="${c}"]`)?Promise.resolve():new Promise((d,u)=>{const h=document.createElement("script");h.src=c,h.async=!0,h.defer=!0;try{h.setAttribute("loading","lazy")}catch{}h.onload=()=>d(),h.onerror=()=>u(new Error("Failed to load Google Maps script")),document.head.appendChild(h)})}async function n(){if(!t)return a||(a=(async()=>{const c=i();await s(c);const d=Date.now();for(;!(window.google&&window.google.maps);){if(Date.now()-d>15e3)throw new Error("Timed out waiting for google.maps");await new Promise(u=>setTimeout(u,50))}t=!0;try{console.log("GoogleMapsAPI.load: Maps JS loaded",{hasGoogle:!!window.google,hasMaps:!!(window.google&&window.google.maps),version:window.google&&window.google.maps&&window.google.maps.version||"unknown"})}catch{}})(),a)}function r(c,d={}){if(!t)throw new Error("Google Maps not loaded. Call GoogleMapsAPI.load() first.");const u=typeof c=="string"?document.getElementById(c):c;if(!u)throw new Error("Map container not found: "+c);const h=new google.maps.Map(u,d);try{const p=h.getCenter&&h.getCenter(),v=h.getZoom&&h.getZoom();console.log("GoogleMapsAPI.initMap: map initialized",{zoom:typeof v=="number"?v:d.zoom,center:p?{lat:p.lat(),lng:p.lng()}:d.center||null})}catch{}const P=new Map;function b(p,v,{title:M="",icon:z=null,zIndex:e=1,onClick:o=null}={}){const l=new google.maps.Marker({map:h,position:v,title:M,icon:z,zIndex:e});return o&&l.addListener("click",()=>o(l,p)),P.set(p,l),l}function _(p){const v=P.get(p);v&&(v.setMap(null),P.delete(p))}function C(){for(const p of P.values())p.setMap(null);P.clear()}function I(p,v={}){const M=P.get(p);M&&(M.setZIndex(9999),v.bounce&&(M.setAnimation(google.maps.Animation.BOUNCE),setTimeout(()=>M.setAnimation(null),700)))}function w(p){if(p){if(typeof p=="string"){const v=ae[p];v&&(h.setZoom(v.zoom),h.setCenter(v.center));return}if(p.center&&p.zoom){h.setCenter(p.center),h.setZoom(p.zoom);return}if(p.lat&&p.lng){h.setCenter(p);return}}}return{map:h,addMarker:b,removeMarker:_,clearMarkers:C,highlightMarker:I,setView:w}}return{load:n,get loaded(){return t},initMap:r,DEFAULT_COUNTRY_VIEW:te}}(),J="gtg-cache-v1",L="cache";function Y(){return new Promise((t,a)=>{const i=indexedDB.open(J);i.onupgradeneeded=()=>{const s=i.result;s.objectStoreNames.contains(L)||s.createObjectStore(L,{keyPath:"key"})},i.onsuccess=()=>{const s=i.result;if(s.objectStoreNames.contains(L))t(s);else{const n=s.version+1;s.close();const r=indexedDB.open(J,n);r.onupgradeneeded=()=>{const c=r.result;c.objectStoreNames.contains(L)||c.createObjectStore(L,{keyPath:"key"})},r.onsuccess=()=>t(r.result),r.onerror=()=>a(r.error)}},i.onerror=()=>a(i.error)})}async function U(t,a){const i=await Y();return new Promise((s,n)=>{const r=i.transaction(L,t),c=r.objectStore(L),d=a(c);r.oncomplete=()=>s(d.result),r.onabort=r.onerror=()=>n(r.error||new Error("IDB error"))})}async function re(t,a,i=24*60*60*1e3){try{const s={key:t,ts:Date.now(),ttl:i,value:a};return await U("readwrite",n=>n.put(s)),!0}catch(s){return console.warn("idbCache.setCache failed",s),!1}}async function ce(t){try{const a=await U("readonly",i=>i.get(t));if(!a)return null;if(typeof a.ts=="number"&&typeof a.ttl=="number"&&Date.now()-a.ts>a.ttl){try{await X(t)}catch{}return null}return a.value}catch(a){return console.warn("idbCache.getCache failed",a),null}}async function X(t){try{return await U("readwrite",a=>a.delete(t)),!0}catch(a){return console.warn("idbCache.delCache failed",a),!1}}async function ie(){try{const t=await Y();return new Promise((a,i)=>{const s=t.transaction(L,"readwrite"),r=s.objectStore(L).openCursor();r.onsuccess=()=>{const c=r.result;if(!c)return;const d=c.value;d&&typeof d.ts=="number"&&typeof d.ttl=="number"&&Date.now()-d.ts>d.ttl&&c.delete(),c.continue()},s.oncomplete=()=>a(!0),s.onerror=()=>i(s.error)})}catch(t){return console.warn("idbCache.clearExpired failed",t),!1}}const N={setCache:re,getCache:ce,delCache:X,clearExpired:ie},H="places_cache_attractions_v1",W="places_cache_restaurants_v1",G=function(){let t=[],a=[],i=null,s=!0;function n(){try{const e=sessionStorage.getItem(H),o=sessionStorage.getItem(W);e&&(t=JSON.parse(e)||[]),o&&(a=JSON.parse(o)||[]);try{console.log("PlacesAPI: loaded session cache",{attractions:t.length,restaurants:a.length})}catch{}}catch(e){console.warn("Failed reading Places cache from sessionStorage",e)}}function r(){try{sessionStorage.setItem(H,JSON.stringify(t)),sessionStorage.setItem(W,JSON.stringify(a))}catch(e){console.warn("Failed saving Places cache to sessionStorage",e)}}n();try{N.clearExpired()}catch{}const c=[{placeId:"sample-1",name:"Antigua Guatemala",types:["tourist_attraction"],status:"OPERATIONAL",location:{lat:14.556,lng:-90.734},address:"Antigua Guatemala",photos:[],region:"Metropolitan",raw:{}},{placeId:"sample-2",name:"Tikal National Park",types:["park","tourist_attraction"],status:"OPERATIONAL",location:{lat:17.223,lng:-89.623},address:"Tikal",photos:[],region:"Petén",raw:{}},{placeId:"sample-3",name:"Lake Atitlán",types:["natural_feature"],status:"OPERATIONAL",location:{lat:14.704,lng:-91.186},address:"Lake Atitlán",photos:[],region:"West",raw:{}}],d={Metropolitan:["Guatemala City","Guatemala City restaurants","restaurants in Guatemala City"],"Las Verapaces":["Las Verapaces","Verapaces Guatemala","restaurants in Las Verapaces"],Petén:["Petén","Petén Guatemala","restaurants in Petén"],"South Coast":["Pacific coast Guatemala","South Coast Guatemala","restaurants on the Pacific coast Guatemala"],West:["Quetzaltenango","Quetzaltenango restaurants","restaurants in Quetzaltenango"],Southeast:["Jutiapa","Jutiapa Guatemala restaurants","restaurants in Jutiapa"],Northeast:["Izabal","Izabal Guatemala restaurants","restaurants in Izabal"]};async function u(){try{if(await se.load(),!i&&window.google&&window.google.maps&&window.google.maps.places){const e=document.createElement("div"),o=new google.maps.Map(e);i=new google.maps.places.PlacesService(o)}i||(s=!1);try{console.log("PlacesAPI.ensure",{mapsAvailable:s,hasService:!!i})}catch{}}catch(e){console.warn("Google Maps failed to load, falling back to session cache if available",e),s=!1;try{console.log("PlacesAPI.ensure: maps unavailable, will use cache/fallback paths")}catch{}}}function h(e){const o=e.geometry&&e.geometry.location?{lat:e.geometry.location.lat(),lng:e.geometry.location.lng()}:null,l=e.photos&&e.photos.length?e.photos.map(m=>m.getUrl({maxWidth:800})):[],f=e.photos&&e.photos.length?e.photos.map(m=>m.photo_reference).filter(Boolean):[];let g=null;if(e.opening_hours)try{typeof e.opening_hours.isOpen=="function"?g=e.opening_hours.isOpen():typeof e.opening_hours.open_now<"u"&&(g=!!e.opening_hours.open_now)}catch{}return{placeId:e.place_id,name:e.name,types:(e.types||[]).slice(0,3),status:e.business_status||null,isOpen:g,location:o,address:e.formatted_address||e.vicinity||null,photos:l,photoRefs:f,region:o?ne(o.lat,o.lng):"Center",raw:e}}function P(e){return e&&Array.isArray(e.photos)&&e.photos.length>0}function b(e){return new Promise((o,l)=>{if(!s||!i)return l(new Error("Places service not available"));i.textSearch(e,(f,g,m)=>{if(g!==window.google.maps.places.PlacesServiceStatus.OK&&g!==window.google.maps.places.PlacesServiceStatus.ZERO_RESULTS)return l(new Error("TextSearch failed: "+g));try{const E=(f||[]).slice(0,3).map(y=>({place_id:y.place_id,name:y.name,business_status:y.business_status,types:y.types,formatted_address:y.formatted_address||y.vicinity}));console.log("PlacesAPI.textSearch callback",{query:e&&e.query,status:g,count:(f||[]).length,sample:E})}catch{}o({results:f||[],pagination:m})})})}async function _(e){try{const o=await N.getCache(`places:detail:${e}`);if(o)return o}catch{}if(await u(),!s||!i)throw new Error("Places service not available");return new Promise((o,l)=>{i.getDetails({placeId:e,fields:["place_id","name","geometry","types","business_status","formatted_address","photos","opening_hours"]},async(f,g)=>{if(g!==window.google.maps.places.PlacesServiceStatus.OK)return l(new Error("getDetails failed: "+g));try{const y=f?{place_id:f.place_id,name:f.name,business_status:f.business_status,types:f.types,formatted_address:f.formatted_address||f.vicinity}:null;console.log("PlacesAPI.getDetails callback",{placeId:e,status:g,preview:y})}catch{}const m=h(f);try{console.log("PlacesAPI.getPlaceById result",{placeId:e,normalized:m})}catch{}const E=Object.assign({},m);try{delete E.raw}catch{}try{const y=await N.setCache(`places:detail:${e}`,E,864e5);console.debug(y?"PlacesAPI: cached place detail":"PlacesAPI: failed to persist place detail to idb",e)}catch(y){console.debug("PlacesAPI: idb setCache error",y)}try{console.log("PlacesAPI.fetchManySeeds: using cached seed results",{query:q,count:cached.length})}catch{}o(m)})})}async function C(e,o="attraction"){const l=K();try{console.log("PlacesAPI.fetchManySeeds: querying textSearch",{query:q})}catch{}const f=o==="restaurant"?l.restaurants:l.destinations;if(!f||!f.length)return e;for(const g of f)if(!e.find(m=>m.placeId===g)){try{const m=await _(g);m&&P(m)&&e.push(m)}catch(m){console.warn("Failed fetching favorite by id",g,m)}if(e.length>=100)break}return e.slice(0,100)}async function I(e){await u();const o=[];if(!s)return t.length?t.slice(0,100):a.length?a.slice(0,100):(console.warn("PlacesAPI: Maps not available and no cache present; returning empty list"),[]);for(const l of e){try{const f=await N.getCache(`places:text:${l}`);if(f&&Array.isArray(f)&&f.length){for(const g of f)o.find(m=>m.placeId===g.placeId)||o.push(g);if(o.length>=100)break;continue}}catch{}try{const{results:f}=await b({query:l});try{console.log("PlacesAPI.fetchManySeeds textSearch",{query:l,resultsCount:(f||[]).length})}catch{}const g=[];for(const m of f){const E=h(m);P(E)&&(o.find(y=>y.placeId===E.placeId)||o.push(E),g.push(E))}try{const m=g.map(y=>{const O=Object.assign({},y);try{delete O.raw}catch{}return O}).slice(0,50);await N.setCache(`places:text:${l}`,m,24*60*60*1e3)?console.debug("PlacesAPI: cached seed results for",l,m.length):console.debug("PlacesAPI: failed to persist seed cache for",l)}catch(m){console.debug("PlacesAPI: idb seed setCache error",m)}}catch(f){console.warn("textSearch seed failed",l,f)}if(o.length>=100)break}try{console.log("PlacesAPI.fetchManySeeds: aggregated results",{total:o.length,sample:o.slice(0,3)})}catch{}return o.slice(0,100)}async function w(){if(t.length)return t;t=await I(["tourist attractions in Guatemala","historic sites in Guatemala","national parks Guatemala","archaeological sites Guatemala","museums Guatemala","landmarks Guatemala"]),t=t.filter(o=>P(o)),(!t||t.length===0)&&!s&&(t=c.slice()),t=await C(t,"attraction"),r();try{console.log("PlacesAPI.fetchAttractions: returning",{count:t.length,sample:t.slice(0,3)})}catch{}return t}async function p(e="All",o=18){await u();try{console.log("PlacesAPI.fetchAttractionsForRegion start",{region:e,mapsAvailable:s})}catch{}if((e==="All"||!e)&&t.length)return C(t.slice(0,o),"attraction");const l=[];e&&e!=="All"?(l.push(`${e} tourist attractions`),l.push(`top sites in ${e}`),l.push(`${e} attractions Guatemala`)):l.push("tourist attractions in Guatemala");try{console.log("PlacesAPI.fetchAttractionsForRegion seeds",{region:e,seeds:l})}catch{}const f=await I(l),g=await C(f,"attraction");try{console.log("PlacesAPI.fetchAttractionsForRegion result",{region:e,count:g.length,sample:g.slice(0,3)})}catch{}return g.slice(0,o)}async function v(){if(a.length)return a;a=await I(["best restaurants in Guatemala","popular restaurants Guatemala","top restaurants Guatemala","local cuisine Guatemala"]),a=a.filter(o=>o.types&&o.types.includes("restaurant")),a=a.filter(o=>P(o)),a=await C(a,"restaurant"),(!a||a.length===0)&&!s&&(a=c.map((o,l)=>({placeId:`sample-restaurant-${l+1}`,name:`${o.name} Bistro`,types:["restaurant"],status:"OPERATIONAL",location:o.location,address:o.address,photos:[],region:o.region,raw:{}}))),r();try{console.log("PlacesAPI.fetchRestaurants: returning",{count:a.length,sample:a.slice(0,3)})}catch{}return a.slice(0,100)}async function M(e="All",o=18){await u();try{console.log("PlacesAPI.fetchRestaurantsForRegion start",{region:e,mapsAvailable:s})}catch{}if((e==="All"||!e)&&a.length)return C(a.slice(0,o),"restaurant");let l=[];e&&e!=="All"?d[e]?l=d[e].slice():(l.push(`${e} restaurants`),l.push(`best restaurants in ${e}`),l.push(`${e} local cuisine`)):l.push("best restaurants in Guatemala");try{console.log("PlacesAPI.fetchRestaurantsForRegion seeds",{region:e,seeds:l})}catch{}let f=await I(l);if(e&&e!=="All"){const m=(f||[]).filter(A=>A.region===e);if(m&&m.length){const A=await C(m,"restaurant");try{console.log("PlacesAPI.fetchRestaurantsForRegion exact match",{region:e,count:A.length,sample:A.slice(0,3)})}catch{}return A.slice(0,o)}const E=["best restaurants in Guatemala","popular restaurants Guatemala",`${e} near Guatemala City`],y=await I(E),O=(y||[]).filter(A=>A.region===e);if(O&&O.length){const A=await C(O,"restaurant");try{console.log("PlacesAPI.fetchRestaurantsForRegion fallback exact",{region:e,count:A.length,sample:A.slice(0,3)})}catch{}return A.slice(0,o)}if(f&&f.length){const A=await C(f,"restaurant");try{console.log("PlacesAPI.fetchRestaurantsForRegion nearby results",{region:e,count:A.length,sample:A.slice(0,3)})}catch{}return A.slice(0,o)}if(y&&y.length){const A=await C(y,"restaurant");try{console.log("PlacesAPI.fetchRestaurantsForRegion broad fallback",{region:e,count:A.length,sample:A.slice(0,3)})}catch{}return A.slice(0,o)}return[]}const g=await C(f,"restaurant");try{console.log("PlacesAPI.fetchRestaurantsForRegion all-region result",{region:e,count:g.length,sample:g.slice(0,3)})}catch{}return g.slice(0,o)}function z(e){const o={};for(const l of e){const f=l.region||"Center";o[f]||(o[f]=[]),o[f].push(l)}return o}return{fetchAttractions:w,fetchAttractionsForRegion:p,fetchRestaurants:v,fetchRestaurantsForRegion:M,groupByRegion:z,getPlaceById:_,_internal:{get attractions(){return t},get restaurants(){return a}}}}(),le={};function ue(t){return t.photos&&t.photos.length?t.photos[0]:t&&Array.isArray(t.photoRefs)&&t.photoRefs.length&&F?`https://maps.googleapis.com/maps/api/place/photo?maxwidth=800&photoreference=${encodeURIComponent(t.photoRefs[0])}&key=${F}`:`${typeof import.meta<"u"&&le?"/wdd330-final-project-guatemala-touristic-guide/":"/"}images/placeholder-2x1.svg`}function de(t){return{id:t.placeId,name:t.name,image:ue(t),types:(t.types||[]).slice(0,3),status:t.status,coords:t.location,region:t.region}}const fe={};function he(t){return t.photos&&t.photos.length?t.photos[0]:t&&Array.isArray(t.photoRefs)&&t.photoRefs.length&&F?`https://maps.googleapis.com/maps/api/place/photo?maxwidth=800&photoreference=${encodeURIComponent(t.photoRefs[0])}&key=${F}`:`${typeof import.meta<"u"&&fe?"/wdd330-final-project-guatemala-touristic-guide/":"/"}images/restaurant-placeholder-1x1.svg`}function me(t){return{id:t.placeId,name:t.name,logo:he(t),types:(t.types||[]).slice(0,3),status:t.status,coords:t.location,region:t.region}}const T={};let S=[],x=[];const R=6;let k=0,$=null;function Z(){return $||($=new IntersectionObserver(t=>{t.forEach(a=>{if(!a.isIntersecting)return;const i=a.target,s=i.dataset.src;s&&Q(()=>import("./util-DIxwDAXf.js"),__vite__mapDeps([0,1])).then(n=>n.imageLoader.enqueue(i,s)).then(()=>{i.removeAttribute("data-src")}).catch(()=>{i.removeAttribute("data-src")}),$.unobserve(i)})},{rootMargin:"200px 0px"}),$)}async function pe(){const t=K(),a=G._internal&&G._internal.attractions?G._internal.attractions:[],i=G._internal&&G._internal.restaurants?G._internal.restaurants:[];async function s(c){let d=a.find(u=>u.placeId===c)||i.find(u=>u.placeId===c);if(d)return d;try{return d=await G.getPlaceById(c),d}catch(u){return console.warn("Failed to fetch favorite detail",c,u),null}}const n=[];for(const c of t.destinations){const d=await s(c);d&&n.push(d)}S=n;const r=[];for(const c of t.restaurants){const d=await s(c);d&&r.push(d)}x=r}function ge(){const t=document.querySelector("#regions");if(!t)return;t.innerHTML="";const a=document.createElement("option");a.value="All",a.textContent="All Regions",t.appendChild(a),Object.keys(G.groupByRegion([...S,...x])).forEach(s=>{const n=document.createElement("option");n.value=s,n.textContent=s,t.appendChild(n)})}function B(){const t=document.querySelector(".destinations-module .container"),a=document.querySelector(".restaurants-module .container");if(t){let i=function(n){const r=de(n),c=document.createElement("article");c.className="result-card destination-card",c.dataset.placeId=r.id;const d=document.createElement("div");d.className="card-media ratio-2x1";const u=document.createElement("img");u.dataset.src=r.image,u.src=typeof import.meta<"u"&&T?"/wdd330-final-project-guatemala-touristic-guide/images/placeholder-2x1.svg":"/images/placeholder-2x1.svg",u.alt=r.name,u.onerror=async()=>{const _=typeof import.meta<"u"&&T?"/wdd330-final-project-guatemala-touristic-guide/":"/";if(n&&n.photos&&n.photos.length){u.src=`${_}images/placeholder-2x1.svg`;return}const C=n&&n.raw?n.raw:null,I=n&&n.photoRefs?n.photoRefs:C&&C.photos?C.photos.map(w=>w.photo_reference).filter(Boolean):[];if(I&&I.length&&F){const w=I[0];u.src=`${_}images/placeholder-2x1.svg`;try{const p=await Q(()=>import("./photoRefQueue-DvO8yEEI.js"),__vite__mapDeps([2,0,1,3,4])),v=p.enqueuePhotoRef||p.default&&p.default.enqueuePhotoRef;if(typeof v=="function"){v(u,w,{googleKey:F});return}}catch(p){console.warn("Failed to enqueue photoRef",p)}}u.src=`${_}images/placeholder-2x1.svg`},d.appendChild(u),c.appendChild(d),Z().observe(u);const h=document.createElement("div");h.className="card-body";const P=document.createElement("h3");P.textContent=r.name,h.appendChild(P);const b=document.createElement("button");return b.type="button",b.className="fav-button",b.textContent=D(r.id,"destination")?"★":"☆",b.addEventListener("click",_=>{_.preventDefault(),_.stopPropagation(),V(r.id,"destination"),b.textContent=D(r.id,"destination")?"★":"☆",B()}),h.appendChild(b),c.appendChild(h),c};if(t.innerHTML="",k=0,S.slice(0,R).forEach(n=>{const r=i(n);t.appendChild(r)}),S.length>R){let n=document.querySelector("#show-more-fav-dest");n||(n=document.createElement("button"),n.id="show-more-fav-dest",n.className="show-more",n.textContent="Show more",n.addEventListener("click",()=>{k++;const r=k*R,c=Math.min(S.length,(k+1)*R);S.slice(r,c).forEach(u=>{const h=i(u);t.appendChild(h)}),(k+1)*R>=S.length&&n.remove()}),t.parentElement.appendChild(n))}}if(a){let i=function(n){const r=me(n),c=document.createElement("article");c.className="result-card restaurant-card",c.dataset.placeId=r.id;const d=document.createElement("div");d.className="card-media ratio-1x1";const u=document.createElement("img");u.dataset.src=r.logo,u.src=typeof import.meta<"u"&&T?"/wdd330-final-project-guatemala-touristic-guide/images/restaurant-placeholder-1x1.svg":"/images/restaurant-placeholder-1x1.svg",u.alt=r.name,u.onerror=()=>{const _=typeof import.meta<"u"&&T?"/wdd330-final-project-guatemala-touristic-guide/":"/";u.src=`${_}images/restaurant-placeholder-1x1.svg`},d.appendChild(u),c.appendChild(d);const h=document.createElement("div");h.className="card-body";const P=document.createElement("h3");P.textContent=r.name,h.appendChild(P);const b=document.createElement("button");return b.type="button",b.className="fav-button",b.textContent=D(r.id,"restaurant")?"★":"☆",b.addEventListener("click",_=>{_.preventDefault(),_.stopPropagation(),V(r.id,"restaurant"),b.textContent=D(r.id,"restaurant")?"★":"☆",B()}),h.appendChild(b),c.appendChild(h),Z().observe(u),c};if(a.innerHTML="",k=0,x.slice(0,R).forEach(n=>{const r=i(n);a.appendChild(r)}),x.length>R){let n=document.querySelector("#show-more-fav-rest");n||(n=document.createElement("button"),n.id="show-more-fav-rest",n.className="show-more",n.textContent="Show more",n.addEventListener("click",()=>{k++;const r=k*R,c=Math.min(x.length,(k+1)*R);x.slice(r,c).forEach(u=>{const h=i(u);a.appendChild(h)}),(k+1)*R>=x.length&&n.remove()}),a.parentElement.appendChild(n))}}}function ye(){const t=document.querySelectorAll("a.explore.button");!t||t.length===0||t.forEach(a=>{a.addEventListener("click",i=>{const s=document.querySelector("#regions"),n=s?s.value:"All",r=oe(a.href,n);i.preventDefault(),location.href=r})})}document.addEventListener("DOMContentLoaded",async()=>{ee(),ye(),await pe(),ge(),B();const t=document.querySelector("#searchbar");t&&t.addEventListener("input",()=>i()),document.querySelectorAll('input[name="status"]').forEach(s=>s.addEventListener("change",()=>i()));const a=document.querySelector("#regions");a&&a.addEventListener("change",()=>i());function i(){var P,b,_,C,I;const s=(_=(b=(P=document.querySelector("#searchbar"))==null?void 0:P.value)==null?void 0:b.toLowerCase())==null?void 0:_.trim(),n=((C=document.querySelector('input[name="status"]:checked'))==null?void 0:C.value)||"all",r=((I=document.querySelector("#regions"))==null?void 0:I.value)||"All",c=S.filter(w=>{if(r!=="All"&&w.region!==r||n!=="all"&&(n==="open"&&(typeof w.isOpen=="boolean"?!w.isOpen:!(w.status||"").toLowerCase().includes("operational"))||n==="closed"&&(typeof w.isOpen=="boolean"?w.isOpen:!(w.status||"").toLowerCase().includes("closed"))))return!1;if(s){const p=(w.name||"").toLowerCase(),v=(w.types||[]).join(" ").toLowerCase();if(!p.includes(s)&&!v.includes(s))return!1}return!0}),d=x.filter(w=>{if(r!=="All"&&w.region!==r||n!=="all"&&(n==="open"&&!(w.status||"").toLowerCase().includes("operational")||n==="closed"&&!(w.status||"").toLowerCase().includes("closed")))return!1;if(s){const p=(w.name||"").toLowerCase(),v=(w.types||[]).join(" ").toLowerCase();if(!p.includes(s)&&!v.includes(s))return!1}return!0}),u=S,h=x;S=c,x=d,B(),S=u,x=h}});export{N as i};
