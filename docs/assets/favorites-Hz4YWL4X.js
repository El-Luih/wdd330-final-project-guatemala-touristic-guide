const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/util-DBCvD-ly.js","assets/util-Do0TevFv.css","assets/photoRefQueue-Ddjgcq1B.js","assets/RestaurantDetails-DxH_l1Bt.js"])))=>i.map(i=>d[i]);
import{loadHeaderFooter as P,loadFavorites as F,googleKey as S,isFavorite as _,toggleFavorite as I}from"./util-DBCvD-ly.js";import{_ as R}from"./preload-helper-b3APuFcS.js";import{c as O,P as E,a as D,r as N}from"./RestaurantDetails-DxH_l1Bt.js";const L={};let f=[],p=[];const h=6;let g=0,x=null;function A(){return x||(x=new IntersectionObserver(a=>{a.forEach(c=>{if(!c.isIntersecting)return;const i=c.target,r=i.dataset.src;r&&R(()=>import("./util-DBCvD-ly.js"),__vite__mapDeps([0,1])).then(e=>e.imageLoader.enqueue(i,r)).then(()=>{i.removeAttribute("data-src")}).catch(()=>{i.removeAttribute("data-src")}),x.unobserve(i)})},{rootMargin:"200px 0px"}),x)}async function j(){const a=F(),c=E._internal&&E._internal.attractions?E._internal.attractions:[],i=E._internal&&E._internal.restaurants?E._internal.restaurants:[];async function r(o){let s=c.find(n=>n.placeId===o)||i.find(n=>n.placeId===o);if(s)return s;try{return s=await E.getPlaceById(o),s}catch(n){return console.warn("Failed to fetch favorite detail",o,n),null}}const e=[];for(const o of a.destinations){const s=await r(o);s&&e.push(s)}f=e;const t=[];for(const o of a.restaurants){const s=await r(o);s&&t.push(s)}p=t}function k(){const a=document.querySelector("#regions");if(!a)return;a.innerHTML="";const c=document.createElement("option");c.value="All",c.textContent="All Regions",a.appendChild(c),Object.keys(E.groupByRegion([...f,...p])).forEach(r=>{const e=document.createElement("option");e.value=r,e.textContent=r,a.appendChild(e)})}function q(){const a=document.querySelector(".destinations-module .container"),c=document.querySelector(".restaurants-module .container");if(a){let i=function(e){const t=D(e),o=document.createElement("article");o.className="result-card destination-card",o.dataset.placeId=t.id;const s=document.createElement("div");s.className="card-media ratio-2x1";const n=document.createElement("img");n.dataset.src=t.image,n.src=typeof import.meta<"u"&&L?"/wdd330-final-project-guatemala-touristic-guide/images/placeholder-2x1.svg":"/images/placeholder-2x1.svg",n.alt=t.name,n.onerror=async()=>{const m=typeof import.meta<"u"&&L?"/wdd330-final-project-guatemala-touristic-guide/":"/";if(e&&e.photos&&e.photos.length){n.src=`${m}images/placeholder-2x1.svg`;return}const y=e&&e.raw?e.raw:null,w=e&&e.photoRefs?e.photoRefs:y&&y.photos?y.photos.map(l=>l.photo_reference).filter(Boolean):[];if(w&&w.length&&S){const l=w[0];n.src=`${m}images/placeholder-2x1.svg`;try{const v=await R(()=>import("./photoRefQueue-Ddjgcq1B.js"),__vite__mapDeps([2,3,0,1])),b=v.enqueuePhotoRef||v.default&&v.default.enqueuePhotoRef;if(typeof b=="function"){b(n,l,{googleKey:S});return}}catch(v){console.warn("Failed to enqueue photoRef",v)}}n.src=`${m}images/placeholder-2x1.svg`},s.appendChild(n),o.appendChild(s),A().observe(n);const u=document.createElement("div");u.className="card-body";const C=document.createElement("h3");C.textContent=t.name,u.appendChild(C);const d=document.createElement("button");return d.type="button",d.className="fav-button",d.textContent=_(t.id,"destination")?"★":"☆",d.addEventListener("click",m=>{m.preventDefault(),m.stopPropagation(),I(t.id,"destination"),d.textContent=_(t.id,"destination")?"★":"☆",q()}),u.appendChild(d),o.appendChild(u),o};if(a.innerHTML="",g=0,f.slice(0,h).forEach(e=>{const t=i(e);a.appendChild(t)}),f.length>h){let e=document.querySelector("#show-more-fav-dest");e||(e=document.createElement("button"),e.id="show-more-fav-dest",e.className="show-more",e.textContent="Show more",e.addEventListener("click",()=>{g++;const t=g*h,o=Math.min(f.length,(g+1)*h);f.slice(t,o).forEach(n=>{const u=i(n);a.appendChild(u)}),(g+1)*h>=f.length&&e.remove()}),a.parentElement.appendChild(e))}}if(c){let i=function(e){const t=N(e),o=document.createElement("article");o.className="result-card restaurant-card",o.dataset.placeId=t.id;const s=document.createElement("div");s.className="card-media ratio-1x1";const n=document.createElement("img");n.dataset.src=t.logo,n.src=typeof import.meta<"u"&&L?"/wdd330-final-project-guatemala-touristic-guide/images/restaurant-placeholder-1x1.svg":"/images/restaurant-placeholder-1x1.svg",n.alt=t.name,n.onerror=()=>{const m=typeof import.meta<"u"&&L?"/wdd330-final-project-guatemala-touristic-guide/":"/";n.src=`${m}images/restaurant-placeholder-1x1.svg`},s.appendChild(n),o.appendChild(s);const u=document.createElement("div");u.className="card-body";const C=document.createElement("h3");C.textContent=t.name,u.appendChild(C);const d=document.createElement("button");return d.type="button",d.className="fav-button",d.textContent=_(t.id,"restaurant")?"★":"☆",d.addEventListener("click",m=>{m.preventDefault(),m.stopPropagation(),I(t.id,"restaurant"),d.textContent=_(t.id,"restaurant")?"★":"☆",q()}),u.appendChild(d),o.appendChild(u),A().observe(n),o};if(c.innerHTML="",g=0,p.slice(0,h).forEach(e=>{const t=i(e);c.appendChild(t)}),p.length>h){let e=document.querySelector("#show-more-fav-rest");e||(e=document.createElement("button"),e.id="show-more-fav-rest",e.className="show-more",e.textContent="Show more",e.addEventListener("click",()=>{g++;const t=g*h,o=Math.min(p.length,(g+1)*h);p.slice(t,o).forEach(n=>{const u=i(n);c.appendChild(u)}),(g+1)*h>=p.length&&e.remove()}),c.parentElement.appendChild(e))}}}function M(){const a=document.querySelectorAll("a.explore.button");!a||a.length===0||a.forEach(c=>{c.addEventListener("click",i=>{const r=document.querySelector("#regions"),e=r?r.value:"All",t=O(c.href,e);i.preventDefault(),location.href=t})})}document.addEventListener("DOMContentLoaded",async()=>{P(),M(),await j(),k(),q();const a=document.querySelector("#searchbar");a&&a.addEventListener("input",()=>i()),document.querySelectorAll('input[name="status"]').forEach(r=>r.addEventListener("change",()=>i()));const c=document.querySelector("#regions");c&&c.addEventListener("change",()=>i());function i(){var C,d,m,y,w;const r=(m=(d=(C=document.querySelector("#searchbar"))==null?void 0:C.value)==null?void 0:d.toLowerCase())==null?void 0:m.trim(),e=((y=document.querySelector('input[name="status"]:checked'))==null?void 0:y.value)||"all",t=((w=document.querySelector("#regions"))==null?void 0:w.value)||"All",o=f.filter(l=>{if(t!=="All"&&l.region!==t||e!=="all"&&(e==="open"&&(typeof l.isOpen=="boolean"?!l.isOpen:!(l.status||"").toLowerCase().includes("operational"))||e==="closed"&&(typeof l.isOpen=="boolean"?l.isOpen:!(l.status||"").toLowerCase().includes("closed"))))return!1;if(r){const v=(l.name||"").toLowerCase(),b=(l.types||[]).join(" ").toLowerCase();if(!v.includes(r)&&!b.includes(r))return!1}return!0}),s=p.filter(l=>{if(t!=="All"&&l.region!==t||e!=="all"&&(e==="open"&&!(l.status||"").toLowerCase().includes("operational")||e==="closed"&&!(l.status||"").toLowerCase().includes("closed")))return!1;if(r){const v=(l.name||"").toLowerCase(),b=(l.types||[]).join(" ").toLowerCase();if(!v.includes(r)&&!b.includes(r))return!1}return!0}),n=f,u=p;f=o,p=s,q(),f=n,p=u}});
