const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/util-CB9drUZY.js","assets/util-Do0TevFv.css","assets/photoRefQueue-PQV-B0nT.js","assets/RestaurantDetails-WGc4J2jN.js"])))=>i.map(i=>d[i]);
import{loadHeaderFooter as P,loadFavorites as F,googleKey as S,isFavorite as _,toggleFavorite as A}from"./util-CB9drUZY.js";import{_ as I}from"./preload-helper-b3APuFcS.js";import{c as O,P as E,a as D,r as N}from"./RestaurantDetails-WGc4J2jN.js";const L={};let f=[],p=[];const h=6;let g=0,x=null;function R(){return x||(x=new IntersectionObserver(r=>{r.forEach(c=>{if(!c.isIntersecting)return;const l=c.target,o=l.dataset.src;o&&I(()=>import("./util-CB9drUZY.js"),__vite__mapDeps([0,1])).then(e=>e.imageLoader.enqueue(l,o)).then(()=>{l.removeAttribute("data-src")}).catch(()=>{l.removeAttribute("data-src")}),x.unobserve(l)})},{rootMargin:"200px 0px"}),x)}async function j(){const r=F(),c=E._internal&&E._internal.attractions?E._internal.attractions:[],l=E._internal&&E._internal.restaurants?E._internal.restaurants:[];async function o(a){let s=c.find(n=>n.placeId===a)||l.find(n=>n.placeId===a);if(s)return s;try{return s=await E.getPlaceById(a),s}catch(n){return console.warn("Failed to fetch favorite detail",a,n),null}}const e=[];for(const a of r.destinations){const s=await o(a);s&&e.push(s)}f=e;const t=[];for(const a of r.restaurants){const s=await o(a);s&&t.push(s)}p=t}function k(){const r=document.querySelector("#regions");if(!r)return;r.innerHTML="";const c=document.createElement("option");c.value="All",c.textContent="All Regions",r.appendChild(c),Object.keys(E.groupByRegion([...f,...p])).forEach(o=>{const e=document.createElement("option");e.value=o,e.textContent=o,r.appendChild(e)})}function q(){const r=document.querySelector(".destinations-module .container"),c=document.querySelector(".restaurants-module .container");if(r){r.innerHTML="",g=0;const l=f.slice(0,h),o=e=>{const t=D(e),a=document.createElement("article");a.className="result-card destination-card",a.dataset.placeId=t.id;const s=document.createElement("div");s.className="card-media ratio-2x1";const n=document.createElement("img");n.dataset.src=t.image,n.src=typeof import.meta<"u"&&L?"/wdd330-final-project-guatemala-touristic-guide/images/placeholder-2x1.svg":"/images/placeholder-2x1.svg",n.alt=t.name,n.onerror=async()=>{const m=typeof import.meta<"u"&&L?"/wdd330-final-project-guatemala-touristic-guide/":"/";if(e&&e.photos&&e.photos.length){n.src=`${m}images/placeholder-2x1.svg`;return}const y=e&&e.raw?e.raw:null,w=e&&e.photoRefs?e.photoRefs:y&&y.photos?y.photos.map(i=>i.photo_reference).filter(Boolean):[];if(w&&w.length&&S){const i=w[0];n.src=`${m}images/placeholder-2x1.svg`;try{const v=await I(()=>import("./photoRefQueue-PQV-B0nT.js"),__vite__mapDeps([2,3,0,1])),b=v.enqueuePhotoRef||v.default&&v.default.enqueuePhotoRef;if(typeof b=="function"){b(n,i,{googleKey:S});return}}catch(v){console.warn("Failed to enqueue photoRef",v)}}n.src=`${m}images/placeholder-2x1.svg`},s.appendChild(n),a.appendChild(s),R().observe(n);const u=document.createElement("div");u.className="card-body";const C=document.createElement("h3");C.textContent=t.name,u.appendChild(C);const d=document.createElement("button");return d.type="button",d.className="fav-button",d.textContent=_(t.id,"destination")?"★":"☆",d.addEventListener("click",m=>{m.preventDefault(),m.stopPropagation(),A(t.id,"destination"),d.textContent=_(t.id,"destination")?"★":"☆",q()}),u.appendChild(d),a.appendChild(u),a};if(l.forEach(e=>{const t=o(e);r.appendChild(t)}),f.length>h){let e=document.querySelector("#show-more-fav-dest");e||(e=document.createElement("button"),e.id="show-more-fav-dest",e.className="show-more",e.textContent="Show more",e.addEventListener("click",()=>{g++;const t=g*h,a=Math.min(f.length,(g+1)*h);f.slice(t,a).forEach(n=>{const u=o(n);r.appendChild(u)}),(g+1)*h>=f.length&&e.remove()}),r.parentElement.appendChild(e))}}if(c){c.innerHTML="",g=0;const l=p.slice(0,h),o=e=>{const t=N(e),a=document.createElement("article");a.className="result-card restaurant-card",a.dataset.placeId=t.id;const s=document.createElement("div");s.className="card-media ratio-1x1";const n=document.createElement("img");n.dataset.src=t.logo,n.src=typeof import.meta<"u"&&L?"/wdd330-final-project-guatemala-touristic-guide/images/restaurant-placeholder-1x1.svg":"/images/restaurant-placeholder-1x1.svg",n.alt=t.name,n.onerror=()=>{const m=typeof import.meta<"u"&&L?"/wdd330-final-project-guatemala-touristic-guide/":"/";n.src=`${m}images/restaurant-placeholder-1x1.svg`},s.appendChild(n),a.appendChild(s);const u=document.createElement("div");u.className="card-body";const C=document.createElement("h3");C.textContent=t.name,u.appendChild(C);const d=document.createElement("button");return d.type="button",d.className="fav-button",d.textContent=_(t.id,"restaurant")?"★":"☆",d.addEventListener("click",m=>{m.preventDefault(),m.stopPropagation(),A(t.id,"restaurant"),d.textContent=_(t.id,"restaurant")?"★":"☆",q()}),u.appendChild(d),a.appendChild(u),R().observe(n),a};if(l.forEach(e=>{const t=o(e);c.appendChild(t)}),p.length>h){let e=document.querySelector("#show-more-fav-rest");e||(e=document.createElement("button"),e.id="show-more-fav-rest",e.className="show-more",e.textContent="Show more",e.addEventListener("click",()=>{g++;const t=g*h,a=Math.min(p.length,(g+1)*h);p.slice(t,a).forEach(n=>{const u=o(n);c.appendChild(u)}),(g+1)*h>=p.length&&e.remove()}),c.parentElement.appendChild(e))}}}function M(){const r=document.querySelectorAll("a.explore.button");!r||r.length===0||r.forEach(c=>{c.addEventListener("click",l=>{const o=document.querySelector("#regions"),e=o?o.value:"All",t=O(c.href,e);l.preventDefault(),location.href=t})})}document.addEventListener("DOMContentLoaded",async()=>{P(),M(),await j(),k(),q();const r=document.querySelector("#searchbar");r&&r.addEventListener("input",()=>l()),document.querySelectorAll('input[name="status"]').forEach(o=>o.addEventListener("change",()=>l()));const c=document.querySelector("#regions");c&&c.addEventListener("change",()=>l());function l(){var C,d,m,y,w;const o=(m=(d=(C=document.querySelector("#searchbar"))==null?void 0:C.value)==null?void 0:d.toLowerCase())==null?void 0:m.trim(),e=((y=document.querySelector('input[name="status"]:checked'))==null?void 0:y.value)||"all",t=((w=document.querySelector("#regions"))==null?void 0:w.value)||"All",a=f.filter(i=>{if(t!=="All"&&i.region!==t||e!=="all"&&(e==="open"&&(typeof i.isOpen=="boolean"?!i.isOpen:!(i.status||"").toLowerCase().includes("operational"))||e==="closed"&&(typeof i.isOpen=="boolean"?i.isOpen:!(i.status||"").toLowerCase().includes("closed"))))return!1;if(o){const v=(i.name||"").toLowerCase(),b=(i.types||[]).join(" ").toLowerCase();if(!v.includes(o)&&!b.includes(o))return!1}return!0}),s=p.filter(i=>{if(t!=="All"&&i.region!==t||e!=="all"&&(e==="open"&&!(i.status||"").toLowerCase().includes("operational")||e==="closed"&&!(i.status||"").toLowerCase().includes("closed")))return!1;if(o){const v=(i.name||"").toLowerCase(),b=(i.types||[]).join(" ").toLowerCase();if(!v.includes(o)&&!b.includes(o))return!1}return!0}),n=f,u=p;f=a,p=s,q(),f=n,p=u}});
