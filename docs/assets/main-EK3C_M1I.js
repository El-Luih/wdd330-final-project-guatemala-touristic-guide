import{loadHeaderFooter as p}from"./util-DDZ2ozR1.js";import{P as y,a as E,g as w,b as C,D as m,R as _}from"./PlaceDetails-DsYDr_P2.js";const A=function(){const e="https://api.open-meteo.com/v1/forecast";async function t(o,a){const n=`${e}?latitude=${encodeURIComponent(o)}&longitude=${encodeURIComponent(a)}&daily=temperature_2m_max,temperature_2m_min,weathercode&timezone=auto`,r=await fetch(n);if(!r.ok)throw new Error("OpenMeteo fetch failed: "+r.status);return r.json()}return{fetchDaily:t}}();function x(e){try{if(!e||!e.daily)return null;const{time:t,temperature_2m_max:o,temperature_2m_min:a,weathercode:n}=e.daily;return Array.isArray(t)?t.map((r,s)=>({date:r,max:(o==null?void 0:o[s])??null,min:(a==null?void 0:a[s])??null,code:(n==null?void 0:n[s])??null})):null}catch(t){return console.error("dailySummary: failed to parse OpenMeteo response",t),null}}const F={0:"clear.svg",1:"mainly_clear.svg",2:"partly_cloudy.svg",3:"overcast.svg",45:"fog.svg",48:"depositing_rime_fog.svg",51:"drizzle_light.svg",53:"drizzle_moderate.svg",55:"drizzle_dense.svg",61:"rain_light.svg",63:"rain_moderate.svg",65:"rain_heavy.svg",71:"snow_light.svg",73:"snow_moderate.svg",75:"snow_heavy.svg",80:"rain_showers_light.svg",81:"rain_showers_moderate.svg",82:"rain_showers_violent.svg"};function I(e){return`${e.toFixed(1)}°C`}async function h(e,t,o="Guatemala"){try{const a=await A.fetchDaily(e,t),n=x(a);if(!n)return;const r=["weather-0","weather-1","weather-2"];for(let i=0;i<3;i++){const l=document.getElementById(r[i]);if(!l)continue;const c=n[i];if(l.innerHTML="",!c)continue;const d=i===0?"Today":i===1?"Tomorrow":new Date(c.date).toLocaleDateString(void 0,{weekday:"long"}),g=document.createElement("h4");g.textContent=d;const u=document.createElement("img"),v=F[c.code]||"clear.svg";u.src=`/images/weather/${v}`,u.alt="weather",u.width=48,u.height=48;const f=document.createElement("div");f.textContent=I(c.max),l.appendChild(g),l.appendChild(u),l.appendChild(f)}const s=document.getElementById("weather-region");s&&(s.textContent=o)}catch(a){console.error("Weather fetch failed",a)}}function L(e){if(e==="All")return m.center;const t=_[e];return t?t.center:m.center}function S(){const e=document.querySelector(".filtering-buttons");e&&e.addEventListener("click",t=>{const o=t.target.closest("button");if(!o)return;document.querySelectorAll(".filtering-buttons button").forEach(r=>r.classList.remove("active")),o.classList.add("active");const a=o.dataset.region||"All",n=L(a);h(n.lat,n.lng,a==="All"?"Guatemala":a)})}function b(){const e=document.querySelectorAll("a.explore.button");!e||e.length===0||e.forEach(t=>{t.addEventListener("click",o=>{const a=w(),n=C(t.href,a);o.preventDefault(),location.href=n})})}document.addEventListener("DOMContentLoaded",()=>{p(),S(),b();const e=m.center;h(e.lat,e.lng,"Guatemala"),(async()=>{try{const t=await y.fetchAttractionsForRegion("All",18),o=document.querySelector(".destinations.container");if(!o)return;o.innerHTML="",t.slice(0,6).forEach(a=>{const n=E(a),r=document.createElement("article");r.className="small-card";const s=document.createElement("div");s.className="card-media ratio-2x1";const i=document.createElement("img");i.src=n.image,i.alt=n.name,i.onerror=()=>{const d="/wdd330-final-project-guatemala-touristic-guide/";i.src=`${d}images/placeholder-2x1.svg`},s.appendChild(i),r.appendChild(s);const l=document.createElement("h4");l.textContent=n.name,r.appendChild(l);const c=document.createElement("button");c.type="button",c.className="fav-button",c.textContent=isFavorite(n.id,"destination")?"★":"☆",c.addEventListener("click",d=>{d.preventDefault(),d.stopPropagation(),toggleFavorite(n.id,"destination"),c.textContent=isFavorite(n.id,"destination")?"★":"☆"}),r.appendChild(c),o.appendChild(r)})}catch(t){console.warn("Failed rendering featured destinations",t)}})()});
