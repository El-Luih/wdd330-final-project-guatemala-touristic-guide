(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function e(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=e(a);fetch(a.href,i)}})();async function v(){const s=document.getElementById("dynamic-header"),t=document.getElementById("dynamic-footer"),e="/wdd330-final-project-guatemala-touristic-guide/";try{const r=await fetch(`${e}/partials/header.html`),a=await fetch(`${e}/partials/footer.html`);if(!r.ok||!a.ok)throw new Error("Partial not found");const i=await r.text(),l=await a.text();s.innerHTML=i,t.innerHTML=l,s.querySelector("#main-logo").setAttribute("src",`${e}/images/gtg-icon.svg`),s.querySelector("#header-banner").setAttribute("href",`${e}/index.html`),s.querySelector("#header-menu").querySelectorAll("a").forEach(function(n){const o=n.dataset.page;n.setAttribute("href",`${e}/${o}/index.html`),window.location.pathname.includes(o)&&n.classList.add("current")});try{const n=s.querySelector("#main-hamburger"),o=s.querySelector("#header-menu");n&&o&&(n.addEventListener("click",c=>{const u=o.classList.toggle("open");n.setAttribute("aria-expanded",u?"true":"false")}),document.addEventListener("click",c=>{if(!s.contains(c.target)){o.classList.contains("open")&&(o.classList.remove("open"),n.setAttribute("aria-expanded","false"));return}!o.contains(c.target)&&c.target!==n&&o.classList.contains("open")&&(o.classList.remove("open"),n.setAttribute("aria-expanded","false"))}),document.addEventListener("keydown",c=>{c.key==="Escape"&&o.classList.contains("open")&&(o.classList.remove("open"),n.setAttribute("aria-expanded","false"))}))}catch(n){console.warn("Hamburger wiring failed",n)}}catch(r){console.error("Error loading partial: ",r)}}const L="AIzaSyA-Ip6-JCeCovgWWG6TijYI2SdLQdHTU84";class S{constructor(t){this.sourceURL=t,this.data}async getData(){try{const t=await fetch(this.sourceURL);if(!t.ok)return console.error(`ExternalData.getData: network error ${t.status} ${t.statusText} for ${this.sourceURL}`),null;let e;try{e=await t.json()}catch(a){return console.error(`ExternalData.getData: invalid JSON from ${this.sourceURL}:`,a),null}const r=e&&Object.prototype.hasOwnProperty.call(e,"Result")?e.Result:e;return r==null?(console.warn(`ExternalData.getData: no data returned from ${this.sourceURL}`),null):(this.data=r,this.data)}catch(t){return console.error(`ExternalData.getData: fetch failed for ${this.sourceURL}:`,t),null}}}const f="favoriteRestaurants_v1",h="favoriteDestinations_v1";function g(){try{const s=JSON.parse(localStorage.getItem(f)||"[]"),t=JSON.parse(localStorage.getItem(h)||"[]");return{restaurants:Array.isArray(s)?s:[],destinations:Array.isArray(t)?t:[]}}catch(s){return console.warn("loadFavorites: corrupt data, resetting",s),localStorage.removeItem(f),localStorage.removeItem(h),{restaurants:[],destinations:[]}}}function y({restaurants:s=[],destinations:t=[]}={}){localStorage.setItem(f,JSON.stringify(s)),localStorage.setItem(h,JSON.stringify(t))}function w(s,t="destination"){const e=g();return t==="restaurant"?e.restaurants.includes(s):e.destinations.includes(s)}function E(s,t="destination"){const e=g();if(t==="restaurant"){const r=new Set(e.restaurants);r.has(s)?r.delete(s):r.add(s),e.restaurants=Array.from(r)}else{const r=new Set(e.destinations);r.has(s)?r.delete(s):r.add(s),e.destinations=Array.from(r)}return y(e),e}function A(s,t=250){let e=null;return(...r)=>{e&&clearTimeout(e),e=setTimeout(()=>s(...r),t)}}class p{constructor(t=3,e=4,r=300){this.concurrency=t,this.queue=[],this.active=0,this.maxRetries=e,this.baseDelay=r}enqueue(t,e,r=0){return new Promise(a=>{this.queue.push({img:t,src:e,resolve:a,attempts:r}),this._next()})}_next(){if(this.active>=this.concurrency||this.queue.length===0)return;const t=this.queue.shift(),{img:e,src:r,resolve:a,attempts:i}=t;this.active++;let l=!1;const d=()=>o(!0),n=()=>o(!1),o=c=>{if(l)return;l=!0;try{e.removeEventListener("load",d),e.removeEventListener("error",n)}catch{}if(this.active--,setTimeout(()=>this._next(),0),c)return a(!0);const u=(i||0)+1;if(u<=this.maxRetries){const m=Math.round(this.baseDelay*Math.pow(2,u-1)+Math.random()*this.baseDelay);setTimeout(()=>{this.queue.push({img:e,src:r,resolve:a,attempts:u}),this._next()},m)}else a(!1)};e.addEventListener("load",d),e.addEventListener("error",n);try{e.src=r}catch{o(!1)}}}const x=new p(2,6,500);export{S as ExternalData,A as debounce,L as googleKey,x as imageLoader,w as isFavorite,g as loadFavorites,v as loadHeaderFooter,y as saveFavorites,E as toggleFavorite};
